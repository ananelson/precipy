## Principles

Precipy is a report-generation tool designed to make reporting on data easy.

Precipy makes a lot of assumptions for simplicity. If you would like a more
general purpose tool which can be used for reporting, reproducible research,
and software documentation, check out this author's other project Dexy.
http://dexy.it

Precipy assumes that:

  * you have python modules containing your data analysis and plot generation functions
  * you are writing documents making use of the results of these calculations

Precipy requires you to:

  * write a .json configuration file which states the order in which your analytics functions (defined in your analytics modules) should be run, and which parameters to pass to them
  * write document templates making use of Jinja2 to incorporate the results of analytics functions into your document

Precipy supports:

  * markdown to HTML conversion
  * HTML to PDF conversion via weasyprint or xhtml2pdf (can be layered on x-to-HTML filter)
  * pandoc
  * you can easily write custom support for any other rendering layer
  * feature/pull requests gladly taken for other document format filters

Precipy is intended to support collaborative editing, and especially to make it possible for non-technical folks to write report copy without needing to deal with scary markup or command line tools. Check out our hacky web front-end prototype.

## Main

The main.py module contains example entry points for running precipy.

You always need to write a custom python script to run precipy, in order to
provide the list of analytics modules on which it should run.

Example:

    from precipy.main import render_file
    import sys
    import analytics

    if __name__ == '__main__':
        render_file(sys.argv[1], [analytics])

## Templates

A precipy project can contain one or more document templates. Templating uses the Jinja2 templating system.

By default, the system looks for document templates in a templates/ directory.
This can be changed by specifying `template_dir` in the configuration.

## Adding Files

The user's function must call either `generate_file()` which yields a file object:

{{ d['precipy/analytics_function.py|pydoc']['AnalyticsFunction.generate_file:source'] | highlight('py') }}

Or, `add_existing_file()` if the file already exists:

{{ d['precipy/analytics_function.py|pydoc']['AnalyticsFunction.add_existing_file:source'] | highlight('py') }}

If a script needs to access a file generated by a previously run script, it can do so via the `read_file()` function, passing the file's canonical name as well as the previous function's key:

{{ d['precipy/analytics_function.py|pydoc']['AnalyticsFunction.read_file:source'] | highlight('py') }}

